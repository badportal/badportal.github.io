<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Signal X Webflasher</title>
    <meta
      name="description"
      content="Easily allow users to flash Signal X Firmware to their ESP-devices on the web."
    />
    <meta name="viewport" content="width=device-width" />

    <meta property="og:title" content="Signal X Firmware" />
    <meta property="og:site_name" content="Signal X Firmware" />
    <meta
      property="og:url"
      content="https://signalx.ddns.net/"
    />
    <meta property="og:type" content="website" />
    <meta
      property="og:description"
      content=""
    />
    <meta
      property="og:image"
      content="https://flippertools.ddns.net/cdn/signalx.gif"
    />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Signal X Webflasher" />
    <meta
      name="twitter:description"
      content="Easily allow users to flash Signal X Firmware to their ESP-devices on the web."
    />
    <meta
      name="twitter:image"
      content="https://flippertools.ddns.net/cdn/signalx.gif"
    />
    <meta name="color-scheme" content="dark light" />
    <link rel="stylesheet" href="../style.css">
    <script type="module" src="https://unpkg.com/esp-web-tools@9.1.2/dist/web/install-button.js?module"></script>

    <style>
        body {
            font-family: -apple-system, system-ui, BlinkMacSystemFont, "Segoe UI", Roboto, Ubuntu, sans-serif;
            background-color: #111827;
            color: #ADD8E6;
            margin: 0;
            padding: 0;
        }

        .container {
            max-width: 800px;
            margin: 50px auto;
            padding: 30px;
            border-radius: 12px;
            background-color: #1F2937;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.2);
            color: #ADD8E6;
        }

        .download-card {
            padding: 20px;
            border-radius: 10px;
            background-color: #2D3748;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            border-bottom: 2px solid #444C56;
            padding-bottom: 10px;
        }

        .card-header h3 {
            font-size: 22px;
            margin: 0;
        }

        .card-header .version {
            font-size: 16px;
            color: #A3B8C6;
        }

        .release-notes {
            list-style-type: none;
            padding: 0;
            margin-bottom: 20px;
        }

        .release-notes li {
            font-size: 16px;
            margin-bottom: 12px;
            color: #A3B8C6;
        }

        .release-notes li::before {
            content: "‚úÖ ";
            color: #28A745;
        }

        .device-selector {
            margin-top: 15px;
        }

        .device-selector label {
            font-size: 16px;
            margin-bottom: 5px;
        }

        .device-select {
            width: 100%;
            padding: 12px;
            font-size: 16px;
            border: 1px solid #ADD8E6;
            border-radius: 6px;
            background-color: #2D3748;
            color: #ADD8E6;
        }

        .download-section {
            text-align: center;
        }

        button {
            background-color: #4C7CDE;
            color: #1e1e1e;
            padding: 12px 20px;
            font-size: 16px;
            border: none;
            cursor: pointer;
            border-radius: 8px;
            margin-top: 20px;
            width: 100%;
            transition: background-color 0.3s ease;
        }

        button:hover {
            background-color: #2A5BB5;
        }

        .footer {
            text-align: center;
            margin-top: 40px;
            padding: 20px;
            background-color: #1F2937;
        }

        .footer-content {
            font-size: 14px;
            color: #A3B8C6;
        }

        .footer a {
            color: #ADD8E6;
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .footer a:hover {
            color: #4C7CDE;
        }
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="nav-content">
            <a href="../" class="logo">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="logo-icon">
                    <path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"></path>
                </svg>
                <span>Signal X Network</span>
            </a>
            <div class="nav-links">
                <a href="/">Home</a>
                <a href="../functions">Functions</a>
                <a href="../download">Download</a>
                <a href="../contact">Contact</a>
            </div>
        </div>
    </nav>

    <header class="page-header">
        <div class="header-content">
            <h1>Download <span>Firmware</span></h1>
            <p>Get started with Signal X Firmware</p>
        </div>
    </header>

    <section class="download-section">
        <div class="container">
            <div class="download-card">
                <div class="card-header">
                    <h3>Latest Release</h3>
                    <span class="version">DEV v0.5</span>
                </div>
                <div class="card-content">
                    <ul class="release-notes">
                        <li>All IR Mods üîß</li>
                        <li>All RF Mods üîß</li>
                        <li>Better packet scanning üì°</li>
                        <li>Bug fixes üêû</li>
                        <li>Custom FQ üì∂</li>
                        <li>UI Themes üé®</li>
                    </ul>

                    <div class="device-selector">
                        <label for="device">Select Your Device:</label>
                        <select id="device" class="device-select">
                            <option value="none">-- Select Device --</option>
                            <option value="m5stickcp2">M5StickC Plus2 [WORKING]</option>
                            <option value="m5stickcp">M5StickC Plus [WORKING]</option>
                            <option value="m5stickheadless">M5StickC Plus2 Headless [COMING SOON]</option>
                            <option value="esp8266">ESP8266 [WORKING]</option>
                        </select>
                    </div>

                    <p id="unsupported-message" class="unsupported-message" style="text-align: center; display: none;">
                        Sorry, this browser does not support Web Serial. Try Google Chrome or Microsoft Edge. 
                        <br>
                        <span>(P.S - iOS devices don't work)</span>
                    </p>

                    <div style="text-align: center;">
                        <esp-web-install-button id="install-button">
                            <title>Flashing</title>
                        </esp-web-install-button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <footer class="footer">
        <div class="footer-content">
            <p>
                Flasher customized by <a href="https://github.com/sgtflixy">sgtflixy</a> 
                <br>
                Installer powered by <a href="https://esphome.github.io/esp-web-tools/">ESP Web Tools</a> üõ†Ô∏è
            </p>
        </div>
    </footer>

    <script>
    const manifestUrls = {
        "flipper": "./manifests/flipper.json",
        "m5stickcp2": "./manifests/m5stickcp2.json",
        "m5stickcp": "./manifests/m5stickcp2.json",
        "lilygotembedcc1101": "./manifests/lilygotembedcc1101.json",
        "lilygotembed": "./manifests/lilygotembed.json",
        "cyd2usb": "./manifests/cyd2usb.json",
        "cydusbc": "./manifests/cydusbc.json",
        "m5stickheadless": "./manifests/m5stickcp2h.json",
        "esp8266": "./manifests/esp8266.json",
        "cyd": "./manifests/cyd.json",
        "generic": "./manifests/esp.json",
        "m5cardputer": "./manifests/m5cardputer.json"
    };

    document.addEventListener("DOMContentLoaded", function () {
        const installButton = document.getElementById("install-button");
        const unsupportedMessage = document.getElementById("unsupported-message");
        const deviceSelect = document.getElementById("device");

        if ("serial" in navigator) {
            unsupportedMessage.style.display = "none";
        } else {
            installButton.style.display = "none";
            unsupportedMessage.style.display = "block";
        }

        deviceSelect.addEventListener("change", function () {
            const selectedDevice = this.value;

            if (selectedDevice && manifestUrls[selectedDevice]) {
                installButton.setAttribute("manifest", manifestUrls[selectedDevice]);
            } else {
                installButton.removeAttribute("manifest");
            }
        });
    });
    </script>
</body>
</html>
